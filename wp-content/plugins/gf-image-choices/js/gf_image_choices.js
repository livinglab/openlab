function imageChoices_SelectedFields(){var e=jQuery(".image-choices-field"),i=e.length?e.find(".gfield_radio li, .gfield_checkbox li"):[];i.length>0&&i.find("input:checked").each(function(){var e=jQuery(this),i=e.closest("li");i.addClass(imageChoices_classes.selected)})}function imageChoices_InitLightbox(){jQuery(".image-choices-field.image-choices-use-lightbox").each(function(){jQuery(this).find(".image-choices-lightbox-btn").jetslothLightbox()})}function imageChoices_onChoiceKeyPress(e){var i=9,c=32,s=jQuery(e.target),o=s.closest(".gfield");if(e.keyCode===c&&(s.is(":checkbox")||s.is(":radio")))s.is(":radio")&&!s.is(":checked")?e.preventDefault():s.is(":checkbox")&&(e.preventDefault(),e.stopImmediatePropagation());else if(e.keyCode===i&&o.hasClass("image-choices-field")){var a=e.shiftKey?"previous":"next",t=s.closest(".image-choices-choice");"next"===a?t.is(":last-child")||(e.preventDefault(),t.next(".image-choices-choice").find("> input").focus()):"previous"===a&&(t.is(":first-child")||(e.preventDefault(),t.prev(".image-choices-choice").find("> input").focus()))}}function onImageChoicesSelectAllClick(e){var i=jQuery(this),c=i.closest(".gfield"),s=i.is(":checked")?c.find(".image-choices-choice input:checked"):c.find(".image-choices-choice input:not(:checked)");s.length&&s.each(function(e,i){var c=jQuery(i);onImageChoicesLabelClick(c.next("label"))})}function onImageChoicesLabelClick(e){var i=e.closest("li"),c=i.closest("ul"),s=i.find("input");i.hasClass("image-choices-choice-other")&&i.find("input:text").focus(),c.hasClass("gfield_radio")?(c.find("."+imageChoices_classes.selected).not(i).removeClass(imageChoices_classes.selected).find("input").prop("checked",!1),i.addClass(imageChoices_classes.selected)):c.hasClass("gfield_checkbox")&&(s.is(":checked")?i.addClass(imageChoices_classes.selected):i.removeClass(imageChoices_classes.selected))}function imageChoices_SetUpFields(){jQuery(".entry-details .detail-view .image-choices-choice-image-wrap").length&&jQuery(".entry-details .detail-view .image-choices-choice-image-wrap").each(function(e){var i=jQuery(this),c=i.closest(".detail-view");c.addClass("image-choices-field image-choices-show-labels")});var e=jQuery(".image-choices-field"),i=e.length?e.find(".gfield_radio li, .gfield_checkbox li"):[];i.length>0&&(i.each(function(){var e=jQuery(this);if(e.hasClass("gchoice_select_all"))return e.find("input").on("click",onImageChoicesSelectAllClick),!0;e.addClass("image-choices-choice");var i=e.data("init");if(i!==!0)if(e.data("init",!0),e.find("label").hover(function(e){return!jQuery(this).find("input").is(":disabled")&&void jQuery(this).closest("li").addClass(imageChoices_classes.hover)},function(e){return!jQuery(this).find("input").is(":disabled")&&void jQuery(this).closest("li").removeClass(imageChoices_classes.hover)}),e.find("input").focus(function(){jQuery(this).closest("li").addClass(imageChoices_classes.focus)}).blur(function(){jQuery(this).closest("li").removeClass(imageChoices_classes.focus)}),e.find('input[value="gf_other_choice"]').length){e.addClass("image-choices-choice-other");var c=e.find("input:text").val();e.append(["<label>",'<span class="image-choices-choice-image-wrap" style="background-image:none;"></span>','<span class="image-choices-choice-text">'+c+"</span>","</label>"].join("")),e.click(function(){onImageChoicesLabelClick(jQuery(this).find("label"))})}else{e.find("input").click(function(){onImageChoicesLabelClick(jQuery(this).siblings("label"))});var s=e.closest(".image-choices-field");if(s.hasClass("image-choices-use-lightbox")&&!e.find(".image-choices-lightbox-btn").length){var o=s.attr("id"),a=e.find(".image-choices-choice-text").text(),t=(a+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0"),l=e.find(".image-choices-choice-image").attr("src"),n=e.find(".image-choices-choice-image").data("lightbox-src");"undefined"!=typeof n&&""!==n||(n=l),""!==n&&e.prepend('<a href="'+n+'" class="image-choices-lightbox-btn" title="'+t+'" rel="'+o+'"><i></i></a>')}}}),setTimeout(function(){imageChoices_SelectedFields(),imageChoices_InitLightbox()},100))}function imageChoices_ConditionalLogic(){var e=jQuery(".image-choices-field");e.length&&e.each(function(){var e=jQuery(this);e.is(":hidden")&&e.find(".image-choices-choice").removeClass(imageChoices_classes.selected+" "+imageChoices_classes.hover+" "+imageChoices_classes.focus)})}function imageChoices_loadCustomCss(e){var i=jQuery("head"),c=jQuery("body"),s=c.find("#gf_image_choices_css-css").length?c:i;"undefined"==typeof window.gf_image_choices_custom_css_global||jQuery("#gf_image_choices_global_custom_css").length||s.append('<style id="gf_image_choices_global_custom_css">'+window.gf_image_choices_custom_css_global+"</style>");var o="gf_image_choices_custom_css_"+e;window.hasOwnProperty(o)&&!jQuery("#"+o).length&&s.append('<style id="'+o+'">'+window[o]+"</style>"),setTimeout(function(){jQuery("html").addClass("gf-image-choices-styles-loaded")},500)}function imageChoices_gformGetOptionLabel(e,i,c,s,o){if(e=jQuery(e),e.closest(".gfield").hasClass("color-picker-field")&&"function"==typeof window.colorPicker_gformGetOptionLabel)return window.colorPicker_gformGetOptionLabel(e,i,c,s,o);var a=e.closest("li"),t=a.index(),l=gformGetPrice(i),n=e.attr("price"),h=e.html().replace(/<span(.*)<\/span>/i,"").replace(n,""),r=gformGetPriceDifference(c,l);r=0==gformToNumber(r)?"":" "+r,e.attr("price",r);var g="option"==e[0].tagName.toLowerCase()?" "+r:"<span class='ginput_price'>"+r+"</span>",d=h+g;return window.gform_format_option_label&&(d=gform_format_option_label(d,h,g,c,l,s,o,t)),d}function imageChoices_gform_format_option_label(e,i,c,s,o,a,t,l){var n=[e],h=jQuery("#gform_"+a+" .gfield#field_"+a+"_"+t);if(h.length&&h.hasClass("image-choices-field")){var r=h.find(".ginput_container li"),g=r.eq(l);if(g.length){var d=g.find("label"),f=g.find("input"),m=f.attr("value"),u=(m.indexOf("|")!==-1?m.substring(0,m.indexOf("|")):"",d.data("img")),_=d.data("lightbox-src"),p=d.find(".image-choices-choice-text").html();""===i&&(i=p);var C=jQuery(c).text();if(""===C&&(c=jQuery("<div>"+c+"</div>").find(".ginput_price").append("+"+gformFormatMoney(o,!0)).html()),n=['<span class="image-choices-choice-image-wrap" style="background-image:url('+u+');">','<img src="'+u+'" class="image-choices-choice-image" alt="" data-lightbox-src="'+_+'" />',"</span>",'<span class="image-choices-choice-text">'+i+"</span>",'<span class="image-choices-choice-price">'+c+"</span>"],h.hasClass("image-choices-use-lightbox")&&g.find(".image-choices-lightbox-btn").length){var b=(i+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0"),v=u,y=_;"undefined"!=typeof y&&""!==y||(y=v),""!==y&&g.find(".image-choices-lightbox-btn").attr("href",y).attr("title",b).attr("rel",t)}}}return n.join("")}function gform_format_option_label(e,i,c,s,o,a,t,l){var n=jQuery("#field_"+a+"_"+t);return n.length&&n.hasClass("color-picker-field")&&"function"==typeof window.colorPicker_gform_format_option_label?window.colorPicker_gform_format_option_label(e,i,c,s,o,a,t,l):imageChoices_gform_format_option_label(e,i,c,s,o,a,t,l)}var imageChoices_classes={selected:"image-choices-choice-selected",hover:"image-choices-choice-hover",focus:"image-choices-choice-focus"};jQuery(document).bind("gform_post_render",function(e,i,c){window.gformGetOptionLabel=imageChoices_gformGetOptionLabel,imageChoices_SetUpFields(),setTimeout(function(){imageChoices_loadCustomCss(i)},100)}),jQuery(document).bind("gform_post_conditional_logic",function(e,i,c,s){imageChoices_ConditionalLogic(),imageChoices_SelectedFields()}),window.gformGetOptionLabel=imageChoices_gformGetOptionLabel;